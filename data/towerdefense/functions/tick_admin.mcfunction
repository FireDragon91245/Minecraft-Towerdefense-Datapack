scoreboard players enable @s td_reinstall
scoreboard players enable @s td_clearprojectile
scoreboard players enable @s td_uninstall

execute unless entity @s[tag=td_reinstall_confirm_message_seen] if score @s td_reinstall matches 1.. if score @s td_reinstall < reinstall_confirmation_threshold td_reinstall run tellraw @s ["",{"text":"[","color":"dark_gray"},{"text":"TD","color":"dark_green"},{"text":"]","color":"dark_gray"},{"text":" A reinstall will wipe all ","color":"green"},{"text":"scoreboards","bold":true,"color":"dark_green"},{"text":", ","color":"green"},{"text":"storages","bold":true,"color":"dark_green"},{"text":", ","color":"green"},{"text":"tags ","bold":true,"color":"dark_green"},{"text":" and ","color":"green"},{"text":"enities","bold":true,"color":"dark_green"},{"text":" (RESET ALL DATAPACK RELATED SUFF, UNRECOVERABLE)","color":"dark_red"},{"text":". ","color":"green"},{"text":"You need to trigger the scoreboard: ","color":"green"},{"score":{"name":"reinstall_confirmation_threshold","objective":"td_reinstall"},"bold":true,"color":"dark_red"},{"text":" times to confirm reinstall, you have entered the command: ","color":"green"},{"score":{"name":"@s","objective":"td_reinstall"},"bold":true,"color":"dark_red"},{"text":"/","bold":true,"color":"dark_gray"},{"score":{"name":"reinstall_confirmation_threshold","objective":"td_reinstall"},"bold":true,"color":"dark_red"},{"text":" Times!","color":"green"}]
execute unless entity @s[tag=td_reinstall_confirm_message_seen] if score @s td_reinstall matches 1.. if score @s td_reinstall < reinstall_confirmation_threshold td_reinstall run tag @s add td_reinstall_confirm_message_seen
execute if score @s td_reinstall >= reinstall_confirmation_threshold td_reinstall run return run function towerdefense:reinstall
# Dont need to manualy resset scoreboard, reinstall recreates it

execute if score @s td_clearprojectile matches 1.. if score @s td_clearprojectile < clearprojectile_confirmation_threshold td_clearprojectile run tellraw @s ["",{"text":"[","color":"dark_gray"},{"text":"TD","color":"dark_green"},{"text":"]","color":"dark_gray"},{"text":" A clearprojectile will wipe all ","color":"green"},{"text":"projectiles","bold":true,"color":"dark_green"},{"text":". ","color":"green"},{"text":"You need to trigger the scoreboard: ","color":"green"},{"score":{"name":"clearprojectile_confirmation_threshold","objective":"td_clearprojectile"},"bold":true,"color":"dark_red"},{"text":" times to confirm clearprojectile, you have entered the command: ","color":"green"},{"score":{"name":"@s","objective":"td_clearprojectile"},"bold":true,"color":"dark_red"},{"text":"/","bold":true,"color":"dark_gray"},{"score":{"name":"clearprojectile_confirmation_threshold","objective":"td_clearprojectile"},"bold":true,"color":"dark_red"},{"text":" Times!","color":"green"}]
execute if score @s td_clearprojectile >= clearprojectile_confirmation_threshold td_clearprojectile run kill @e[predicate=towerdefense:projectile]
execute if score @s td_clearprojectile >= clearprojectile_confirmation_threshold td_clearprojectile run scoreboard players reset @s td_clearprojectile

execute if score @s td_uninstall matches 1.. if score @s td_uninstall < uninstall_confirmation_threshold td_uninstall run tellraw @s ["",{"text":"[","color":"dark_gray"},{"text":"TD","color":"dark_green"},{"text":"]","color":"dark_gray"},{"text":" A uninstall will wipe all ","color":"green"},{"text":"scoreboards","bold":true,"color":"dark_green"},{"text":", ","color":"green"},{"text":"storages","bold":true,"color":"dark_green"},{"text":", ","color":"green"},{"text":"tags ","bold":true,"color":"dark_green"},{"text":" and ","color":"green"},{"text":"enities","bold":true,"color":"dark_green"},{"text":". ","color":"green"},{"text": "(RESET ALL DATAPACK RELATED SUFF, UNRECOVERABLE) ", "bold": true, "color": "dark_red"},{"text":"You need to trigger the scoreboard: ","color":"green"},{"score":{"name":"uninstall_confirmation_threshold","objective":"td_uninstall"},"bold":true,"color":"dark_red"},{"text":" times to confirm uninstall, you have entered the command: ","color":"green"},{"score":{"name":"@s","objective":"td_uninstall"},"bold":true,"color":"dark_red"},{"text":"/","bold":true,"color":"dark_gray"},{"score":{"name":"uninstall_confirmation_threshold","objective":"td_uninstall"},"bold":true,"color":"dark_red"},{"text":" Times!","color":"green"}]
execute if score @s td_uninstall >= uninstall_confirmation_threshold td_uninstall run return run function towerdefense:uninstall
# Dont need to manualy resset scoreboard, uninstall deletes it

